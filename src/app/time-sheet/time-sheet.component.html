<wo-header>
  <wo-header-content position="left">Feuille de temps</wo-header-content>

  <wo-header-content position="center">
    <form [formGroup]="form" novalidate>
      <md-select
        class="dark-bg"
        placeholder="Mois"
        floatPlaceholder="never"
        [(ngModel)]="selectedMonth"
        (change)="onMonthSelected()"
      >
        <md-option [value]="month" *ngFor="let month of months">{{ month }}</md-option>
      </md-select>

      <md-form-field floatPlaceholder="never" class="dark-bg">
        <input type="number" mdInput placeholder="Année" [(ngModel)]="selectedYear" />
      </md-form-field>
    </form>
  </wo-header-content>

  <wo-header-content position="right">
    <button class="btn-menu" md-icon-button [mdMenuTriggerFor]="menu">
      <md-icon>menu</md-icon>
    </button>
    <md-menu #menu="mdMenu">
      <button md-menu-item [routerLink]="[ '/' ]">
        <md-icon>today</md-icon>
        <span>Calendrier</span>
      </button>
      <button md-menu-item [routerLink]="[ '/settings/projects' ]">
        <md-icon>settings</md-icon>
        <span>Paramètres</span>
      </button>
      <div class="divider"></div>
      <button md-menu-item (click)="onLogout()">
        <md-icon>exit_to_app</md-icon>
        <span>Se déconnecter</span>
      </button>
    </md-menu>
  </wo-header-content>
</wo-header>

<div class="time-sheet">
  <h3 class="title first-title">Projets</h3>

  <div class="nothing-to-show" *ngIf="projects.length === 0">Aucunes imputations</div>

  <div class="row" *ngFor="let project of projects">
    <div class="name">
      <p class="client">{{ project.client }}</p>
      <p class="code-name">{{ project.code }} {{ project.name }}</p>
    </div>

    <div class="imputations">
      <div class="day" *ngFor="let day of dayInMonth" [class.separator]="day.dayOfWeek === 6">
        <div class="number">{{ day.dayNumber }}</div>
        <div class="imputation imputation-am" [class.selected]="project.am.includes(day.dayNumber)"></div>
        <div class="imputation imputation-pm" [class.selected]="project.pm.includes(day.dayNumber)"></div>
      </div>
    </div>

    <div class="count">{{ (project.am.length + project.pm.length) / 2 }}</div>
  </div>
</div>
